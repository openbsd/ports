--- scripts/mysql_install_db.sh.orig	Wed Jan 12 15:06:30 2000
+++ scripts/mysql_install_db.sh	Thu Nov  2 09:11:00 2000
@@ -15,10 +15,6 @@
 force=0
 IN_RPM=0
 
-# Are we doing an rpm install?
-if test "$1" = "-IN-RPM"; then IN_RPM=1; shift; fi
-if test "$1" = "--force"; then force=1; shift; fi
-
 # Get mysqld/safe_mysqld options from /etc/my.cnf or ~/.my.cnf
 if test -w /
 then
@@ -49,20 +45,12 @@
 
 if test ! -x $execdir/mysqld
 then
-  if test "$IN_RPM" -eq 1
-  then
-    echo "FATAL ERROR $execdir/mysqld not found!"
-    exit 1
-  else
     echo "Didn't find $execdir/mysqld"
     echo "You should do a 'make install' before executing this script"
     exit 1
-  fi
 fi
 
-# On IRIX hostname is in /usr/bsd so add this to the path
-PATH=$PATH:/usr/bsd
-hostname=`hostname`		# Install this too in the user table
+hostname=`hostname -s`		# Install this too in the user table
 
 # Check if hostname is valid
 if test "$IN_RPM" -eq 0 -a $force -eq 0
@@ -89,7 +77,7 @@
 # Create database directories mysql & test
 if test "$IN_RPM" -eq 0
 then
-  if test ! -d $ldata; then mkdir $ldata; chmod 700 $ldata ; fi
+  if test ! -d $ldata; then mkdir $ldata; chmod 711 $ldata ; fi
   if test ! -d $ldata/mysql; then mkdir $ldata/mysql;  chmod 700 $ldata/mysql ; fi
   if test ! -d $ldata/test; then mkdir $ldata/test;  chmod 700 $ldata/test ; fi
   if test -w / -a ! -z "$user"; then
@@ -255,12 +243,6 @@
 END_OF_DATA
 then
   echo ""
-  if test "$IN_RPM" -eq 0
-  then
-    echo "To start mysqld at boot time you have to copy support-files/mysql.server"
-    echo "to the right place for your system"
-    echo
-  fi
   echo "PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !"
   echo "This is done with:"
   echo "$bindir/mysqladmin -u root password 'new-password'"
