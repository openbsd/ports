Avoid use of long-deprecated functions.

Index: libmariadb/libmariadb/secure/openssl.c
--- libmariadb/libmariadb/secure/openssl.c.orig
+++ libmariadb/libmariadb/secure/openssl.c
@@ -285,7 +285,6 @@ void ma_tls_end()
     {
       int i;
       CRYPTO_set_locking_callback(NULL);
-      CRYPTO_THREADID_set_callback(NULL);
 
       for (i=0; i < CRYPTO_num_locks(); i++)
         pthread_mutex_destroy(&LOCK_crypto[i]);
@@ -842,7 +841,7 @@ int ma_tls_verify_server_cert(MARIADB_TLS *ctls, unsig
       goto error;
     }
 
-    cn_str = (char *)ASN1_STRING_data(cn_asn1);
+    cn_str = (char *)ASN1_STRING_get0_data(cn_asn1);
 
     /* Make sure there is no embedded \0 in the CN */
     if ((size_t)ASN1_STRING_length(cn_asn1) != strlen(cn_str))
