set_program_name(domain) requires newer py-gtk2, but is kept back
due to implied py-Nummeric update.

$OpenBSD: patch-system-config-printer_py,v 1.7 2009/01/31 12:37:30 ajacoutot Exp $
--- system-config-printer.py.orig	Fri Jan 16 11:35:26 2009
+++ system-config-printer.py	Sat Jan 31 12:11:42 2009
@@ -101,10 +101,6 @@ busy_cursor = gtk.gdk.Cursor(gtk.gdk.WATCH)
 ready_cursor = gtk.gdk.Cursor(gtk.gdk.LEFT_PTR)
 ellipsis = unichr(0x2026)
 
-TEXT_start_firewall_tool = _("To do this, select "
-                             "System->Administration->Firewall "
-                             "from the main menu.")
-
 try:
     try_CUPS_SERVER_REMOTE_ANY = cups.CUPS_SERVER_REMOTE_ANY
 except AttributeError:
@@ -336,7 +332,7 @@ class GUI(GtkGUI, monitor.Watcher):
         np.NewPrinterWindow.set_transient_for(self.MainWindow)
 
         # Set up "About" dialog
-        self.AboutDialog.set_program_name(domain)
+        #self.AboutDialog.set_program_name(domain)
         self.AboutDialog.set_version(config.VERSION)
         self.AboutDialog.set_icon_name('printer')
 
@@ -381,7 +377,7 @@ class GUI(GtkGUI, monitor.Watcher):
         self.dests_iconview.set_row_spacing (20)
         self.dests_iconview.set_pixbuf_column (1)
         self.dests_iconview.set_text_column (2)
-        self.dests_iconview.set_tooltip_column (3)
+        #self.dests_iconview.set_tooltip_column (3)
         self.dests_iconview.connect ('item-activated',
                                      self.dests_iconview_item_activated)
         self.dests_iconview.connect ('selection-changed',
@@ -2511,25 +2507,6 @@ class GUI(GtkGUI, monitor.Watcher):
         self.changed = set()
         self.setDataButtonState()
 
-        old_setting = self.server_settings.get (cups.CUPS_SERVER_SHARE_PRINTERS,
-                                                '0')
-        new_setting = setting_dict.get (cups.CUPS_SERVER_SHARE_PRINTERS, '0')
-        if (old_setting == '0' and new_setting != '0'):
-            # We have just enabled print queue sharing.
-            # Ideally, this is the time we would check the firewall
-            # settings on this machine and request that the IPP TCP port
-            # be unblocked.  Unfortunately, this is not yet possible
-            # (bug #440469).  However, we can display a dialog to suggest
-            # that now might be a good time to review the firewall settings.
-            show_info_dialog (_("Review Firewall"),
-                              _("You may need to adjust the firewall "
-                                "to allow network printing to this "
-                                "computer.") + '\n\n' +
-                              TEXT_start_firewall_tool,
-                              parent=self.ServerSettingsDialog)
-
-        time.sleep(1) # give the server a chance to process our request
-
         # Now reconnect, in case the server needed to reload.
         self.reconnect ()
 
@@ -3696,7 +3673,7 @@ class NewPrinterGUI(GtkGUI):
         # Try to get make and model via SNMP
         if host:
             os.environ["HOST"] = host
-            cmd = '/usr/lib/cups/backend/snmp "${HOST}"'
+            cmd = '${LOCALBASE}/libexec/cups/backend/snmp "${HOST}"'
             debugprint (host + ": " + cmd)
             stdout = None
             try:
@@ -5194,7 +5171,7 @@ class NewPrinterGUI(GtkGUI):
                 try:
                     # We want this to be in the current natural language,
                     # so we intentionally don't set LC_ALL=C here.
-                    p = subprocess.Popen (['/usr/bin/cupstestppd',
+                    p = subprocess.Popen (['${LOCALBASE}/bin/cupstestppd',
                                            '-rvv', filename],
                                           stdin=file("/dev/null"),
                                           stdout=subprocess.PIPE,
