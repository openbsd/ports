$OpenBSD: patch-Makefile,v 1.3 2002/03/26 08:20:19 form Exp $
--- Makefile.orig	Mon Feb 18 13:35:54 2002
+++ Makefile	Mon Feb 18 13:36:31 2002
@@ -3,9 +3,9 @@
 # Note: -O2 is sometimes broken in GCC when setjump/longjump is being
 # used. Try -O2 only with released simulators.
 #
-CC = gcc -O0 -lm -I .
+#CC = gcc -O0 -lm -I .
 #CC = gcc -O2 -g -lm -I .
-
+CFLAGS += -lm -I.
 
 
 #
@@ -158,87 +158,87 @@ all : ${BIN}pdp1 ${BIN}pdp4 ${BIN}pdp7 $
 # Individual builds
 #
 ${BIN}pdp1 : ${PDP1} ${SIM}
-	${CC} ${PDP1} ${SIM} ${PDP1_OPT} -o $@
+	${CC} ${CFLAGS} ${PDP1} ${SIM} ${PDP1_OPT} -o $@
 
 
 
 ${BIN}pdp4 : ${PDP18B} ${SIM}
-	${CC} ${PDP18B} ${SIM} ${PDP4_OPT} -o $@
+	${CC} ${CFLAGS} ${PDP18B} ${SIM} ${PDP4_OPT} -o $@
 
 
 
 ${BIN}pdp7 : ${PDP18B} ${SIM}
-	${CC} ${PDP18B} ${SIM} ${PDP7_OPT} -o $@
+	${CC} ${CFLAGS} ${PDP18B} ${SIM} ${PDP7_OPT} -o $@
 
 
 
 ${BIN}pdp8 : ${PDP8} ${SIM}
-	${CC} ${PDP8} ${SIM} ${PDP8_OPT} -o $@
+	${CC} ${CFLAGS} ${PDP8} ${SIM} ${PDP8_OPT} -o $@
 
 
 
 ${BIN}pdp9 : ${PDP18B} ${SIM}
-	${CC} ${PDP18B} ${SIM} ${PDP9_OPT} -o $@
+	${CC} ${CFLAGS} ${PDP18B} ${SIM} ${PDP9_OPT} -o $@
 
 
 
 ${BIN}pdp15 : ${PDP18B} ${SIM}
-	${CC} ${PDP18B} ${SIM} ${PDP15_OPT} -o $@
+	${CC} ${CFLAGS} ${PDP18B} ${SIM} ${PDP15_OPT} -o $@
 
 
 
 ${BIN}pdp10 : ${PDP10} ${SIM}
-	${CC} ${PDP10} ${SIM} ${PDP10_OPT} -o $@
+	${CC} ${CFLAGS} ${PDP10} ${SIM} ${PDP10_OPT} -o $@
 
 
 
 ${BIN}pdp11 : ${PDP11} ${SIM}
-	${CC} ${PDP11} ${SIM} ${PDP11_OPT} -o $@
+	${CC} ${CFLAGS} ${PDP11} ${SIM} ${PDP11_OPT} -o $@
 
 
 
 ${BIN}vax : ${VAX} ${SIM}
-	${CC} ${VAX} ${SIM} ${VAX_OPT} -o $@
+	${CC} ${CFLAGS} ${VAX} ${SIM} ${VAX_OPT} -o $@
 
 
 
 ${BIN}nova : ${NOVA} ${SIM}
-	${CC} ${NOVA} ${SIM} ${NOVA_OPT} -o $@
+	${CC} ${CFLAGS} ${NOVA} ${SIM} ${NOVA_OPT} -o $@
 
 
 
 ${BIN}eclipse : ${ECLIPSE} ${SIM}
-	${CC} ${ECLIPSE} ${SIM} ${ECLIPSE_OPT} -o $@
+	${CC} ${CFLAGS} ${ECLIPSE} ${SIM} ${ECLIPSE_OPT} -o $@
 
 
 
 ${BIN}h316 : ${H316} ${SIM}
-	${CC} ${H316} ${SIM} ${H316_OPT} -o $@
+	${CC} ${CFLAGS} ${H316} ${SIM} ${H316_OPT} -o $@
 
 
 
 ${BIN}hp2100 : ${HP2100} ${SIM}
-	${CC} ${HP2100} ${SIM} ${HP2100_OPT} -o $@
+	${CC} ${CFLAGS} ${HP2100} ${SIM} ${HP2100_OPT} -o $@
 
 
 
 ${BIN}i1401 : ${I1401} ${SIM}
-	${CC} ${I1401} ${SIM} ${I1401_OPT} -o $@
+	${CC} ${CFLAGS} ${I1401} ${SIM} ${I1401_OPT} -o $@
 
 
 
 ${BIN}sds : ${SDS} ${SIM}
-	${CC} ${SDS} ${SIM} ${SDS_OPT} -o $@
+	${CC} ${CFLAGS} ${SDS} ${SIM} ${SDS_OPT} -o $@
 
 
 
 ${BIN}s3 : ${S3} ${SIM}
-	${CC} ${S3} ${SIM} ${S3_OPT} -o $@
+	${CC} ${CFLAGS} ${S3} ${SIM} ${S3_OPT} -o $@
 
 
 ${BIN}altair : ${ALTAIR} ${SIM}
-	${CC} ${ALTAIR} ${SIM} ${ALTAIR_OPT} -o $@
+	${CC} ${CFLAGS} ${ALTAIR} ${SIM} ${ALTAIR_OPT} -o $@
 
 
 ${BIN}altairz80 : ${ALTAIRZ80} ${SIM}
-	${CC} ${ALTAIRZ80_OPT} ${ALTAIRZ80} ${SIM} -o $@
+	${CC} ${CFLAGS} ${ALTAIRZ80_OPT} ${ALTAIRZ80} ${SIM} -o $@
