$OpenBSD: patch-source4_heimdal_build_wscript_build,v 1.1 2015/08/25 11:04:39 jca Exp $
Make Samba4 WAF respect OpenBSD shared libraries versioning conventions.
BUG: https://bugzilla.samba.org/show_bug.cgi?id=9774
--- source4/heimdal_build/wscript_build.orig	Thu Dec  5 10:16:48 2013
+++ source4/heimdal_build/wscript_build	Wed Jun 17 13:28:09 2015
@@ -243,6 +243,11 @@ def HEIMDAL_LIBRARY(libname, source, deps, vnum, versi
 
     features = 'cc cshlib symlink_lib install_lib'
 
+    # OpenBSD-like library version handling
+    osvnum = os.getenv('LIB' + bundled_name.replace('-', '_') + '_VERSION')
+    if osvnum:
+        vnum = osvnum
+
     bld.set_group('main')
     t = bld(
         features        = features,
