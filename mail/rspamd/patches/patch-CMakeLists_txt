$OpenBSD: patch-CMakeLists_txt,v 1.2 2015/10/17 19:35:51 sthen Exp $

don't pick up libevent2 from ports, otherwise rspamd links against
both libevent from base *and* libevent2

--- CMakeLists.txt.orig	Thu Oct  8 13:36:31 2015
+++ CMakeLists.txt	Thu Oct 15 21:29:49 2015
@@ -468,6 +468,11 @@ IF(CMAKE_SYSTEM_NAME STREQUAL "FreeBSD")
 	SET(TAR "gtar")
 ENDIF(CMAKE_SYSTEM_NAME STREQUAL "FreeBSD")
 
+IF(CMAKE_SYSTEM_NAME STREQUAL "OpenBSD")
+	MESSAGE(STATUS "Configuring for OpenBSD")
+	SET(POE_LOOP "Loop::Kqueue")
+ENDIF(CMAKE_SYSTEM_NAME STREQUAL "OpenBSD")
+
 IF(CMAKE_SYSTEM_NAME STREQUAL "Darwin")
 	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -D_BSD_SOURCE -DDARWIN")
 	SET(CMAKE_SHARED_LIBRARY_CREATE_C_FLAGS "${CMAKE_SHARED_LIBRARY_CREATE_C_FLAGS} -undefined dynamic_lookup")
@@ -583,7 +588,7 @@ ProcessPackage(PCRE LIBRARY pcre INCLUDE pcre.h INCLUD
 ProcessPackage(GMIME LIBRARY gmime-2.6 gmime-2.4 gmime-2.2 gmime-2 INCLUDE gmime.h INCLUDE_SUFFIXES include/gmime 
 	ROOT ${GMIME_ROOT_DIR} MODULES gmime-2.6 gmime-2.4 gmime-2.0)
 ProcessPackage(LIBEVENT LIBRARY event INCLUDE event.h INCLUDE_SUFFIXES include/event 
-	ROOT ${LIBEVENT_ROOT_DIR} MODULES event libevent)
+	ROOT ${LIBEVENT_ROOT_DIR} MODULES event)
 ProcessPackage(SQLITE3 LIBRARY sqlite3 INCLUDE sqlite3.h INCLUDE_SUFFIXES include/sqlite3 include/sqlite 
 	ROOT ${SQLITE3_ROOT_DIR} MODULES sqlite3 sqlite)
 ProcessPackage(ICONV LIBRARY iconv libiconv libiconv-2 c INCLUDE iconv.h INCLUDE_SUFFIXES include/libiconv
@@ -1119,4 +1124,4 @@ ADD_CUSTOM_TARGET(dist ${CMAKE_SOURCE_DIR}/dist.sh
 IF(NOT DEBIAN_BUILD)
 	ADD_CUSTOM_TARGET(check DEPENDS rspamd-test)
 	ADD_CUSTOM_TARGET(run-test DEPENDS check COMMAND test/rspamd-test)
-ENDIF(NOT DEBIAN_BUILD)
\ No newline at end of file
+ENDIF(NOT DEBIAN_BUILD)
