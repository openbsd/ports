--- src/transports/appendfile.c.orig	Wed Apr 12 11:44:59 2000
+++ src/transports/appendfile.c	Mon Jun  5 00:14:52 2000
@@ -2330,9 +2330,16 @@ opened, so that it goes away on closure.
 #ifdef SUPPORT_MBX
 if (yield == OK && ob->mbx_format)
   {
+#if OpenBSD
+  char tempbuf[] = "/tmp/exim.XXXXXXXXXX";
+
+  tempname = tempbuf;
+  if ((temp_fd = mkstemp(tempname)) == -1 || unlink(tempname) < 0)
+#else
   tempname = tmpnam(NULL);
   if ((temp_fd = open(tempname, (O_RDWR|O_CREAT|O_TRUNC), 0600)) < 0 ||
       unlink(tempname) < 0)
+#endif
     {
     addr->basic_errno = errno;
     addr->message = string_sprintf("while setting up temporary file %s",
