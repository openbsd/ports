--- configure.orig	Wed Aug 15 19:23:15 2007
+++ configure	Tue Aug 28 15:37:04 2007
@@ -5206,9 +5206,7 @@ CFLAGS=$save_CFLAGS
 fi
 
 if test "$ac_cv_fpic" = "yes"; then
-    FPIC_CFLAGS="-fPIC"
-else
-    FPIC_CFLAGS=""
+    CFLAGS="${CFLAGS} -fPIC"
 fi
 echo "$as_me:$LINENO: result: $ac_cv_fpic" >&5
 echo "${ECHO_T}$ac_cv_fpic" >&6
@@ -8907,7 +8905,7 @@ echo "$as_me: error: Berkeley DB 3.x or later was not 
 
 
 
-  LIBS="${LIBS} ${BDB_LIBADD}"
+  LIBS="${BDB_LIBADD} ${LIBS}"
   CPPFLAGS="${BDB_INCADD} ${CPPFLAGS}"
 
   CYRUSDB_OBJS="$CYRUSDB_OBJS cyrusdb_berkeley.o"
@@ -12248,7 +12246,7 @@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lresolv  $LIBS"
+#LIBS="-lresolv  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -14802,7 +14800,7 @@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lresolv  $LIBS"
+#LIBS="-lresolv  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -14892,7 +14890,7 @@ if test "${ac_cv_lib_gssapi_gss_unwrap+set}" = set; th
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lgssapi ${GSSAPIBASE_LIBS} -lgssapi -lkrb5 -lasn1 -lroken ${LIB_CRYPT} ${LIB_DES} -lcom_err ${LIB_SOCKET} $LIBS"
+LIBS="-lgssapi ${GSSAPIBASE_LIBS} -lgssapi -lkrb5 -lasn1 -lcrypto ${LIB_CRYPT} ${LIB_DES} -lcom_err ${LIB_SOCKET} $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -15362,8 +15360,8 @@ fi
     GSSAPIBASE_STATIC_LIBS="$GSSAPIBASE_LIBS $gssapi_dir/libgssapi_krb5.a $gssapi_dir/libkrb5.a $gssapi_dir/libk5crypto.a $gssapi_dir/libcom_err.a ${K5SUPSTATIC}"
   elif test "$gss_impl" = "heimdal"; then
     CPPFLAGS="$CPPFLAGS -DKRB5_HEIMDAL"
-    GSSAPIBASE_LIBS="$GSSAPIBASE_LIBS -lgssapi -lkrb5 -lasn1 -lroken ${LIB_CRYPT} ${LIB_DES} -lcom_err"
-    GSSAPIBASE_STATIC_LIBS="$GSSAPIBASE_STATIC_LIBS $gssapi_dir/libgssapi.a $gssapi_dir/libkrb5.a $gssapi_dir/libasn1.a $gssapi_dir/libroken.a $gssapi_dir/libcom_err.a ${LIB_CRYPT}"
+    GSSAPIBASE_LIBS="$GSSAPIBASE_LIBS -lgssapi -lkrb5 -lasn1 ${LIB_CRYPT} ${LIB_DES} -lcom_err"
+    GSSAPIBASE_STATIC_LIBS="$GSSAPIBASE_STATIC_LIBS $gssapi_dir/libgssapi.a $gssapi_dir/libkrb5.a $gssapi_dir/libasn1.a $gssapi_dir/libcom_err.a ${LIB_CRYPT}"
   elif test "$gss_impl" = "cybersafe03"; then
 # Version of CyberSafe with two libraries
     CPPFLAGS="$CPPFLAGS -D$platform -I${gssapi}/appsec-sdk/include"
@@ -15547,7 +15545,7 @@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lresolv  $LIBS"
+#LIBS="-lresolv  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -17385,6 +17383,8 @@ extern "C"
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
 char request_init ();
+int allow_severity = 1;
+int deny_severity = 1;
 int
 main ()
 {
