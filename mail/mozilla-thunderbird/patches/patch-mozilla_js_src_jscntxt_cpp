$OpenBSD: patch-mozilla_js_src_jscntxt_cpp,v 1.2 2012/04/30 15:32:06 landry Exp $
--- mozilla/js/src/jscntxt.cpp.orig	Sat Apr 21 00:40:08 2012
+++ mozilla/js/src/jscntxt.cpp	Wed Apr 25 19:00:11 2012
@@ -104,9 +104,11 @@ JSRuntime::sizeOfExcludingThis(JSMallocSizeOfFun mallo
 
     if (regexpCode) {
         size_t method = 0, regexp = 0, unused = 0;
+#if ENABLE_ASSEMBLER
         if (execAlloc_)
             execAlloc_->sizeOfCode(&method, &regexp, &unused);
         JS_ASSERT(method == 0);     /* this execAlloc is only used for regexp code */
+#endif
         *regexpCode = regexp + unused;
     }
 
@@ -124,6 +126,7 @@ JSRuntime::triggerOperationCallback()
     JS_ATOMIC_SET(&interrupt, 1);
 }
 
+#if ENABLE_ASSEMBLER
 JSC::ExecutableAllocator *
 JSRuntime::createExecutableAllocator(JSContext *cx)
 {
@@ -135,6 +138,7 @@ JSRuntime::createExecutableAllocator(JSContext *cx)
         js_ReportOutOfMemory(cx);
     return execAlloc_;
 }
+#endif
 
 WTF::BumpPointerAllocator *
 JSRuntime::createBumpPointerAllocator(JSContext *cx)
