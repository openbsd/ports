<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>bmf mini-howto</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="STYLESHEET" href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/docbook.css">
</head>
<body>


<h3>Theoretical part:</h3>

<p>Before you start to use bmf it is a good thing to know  a  little bit about
   the theoretical background of
<a href="http://www.paulgraham.com/spam.html">Bayesian spamfiltering</a>.


<h3>Basic installation:</h3>

<p>After installing the port put this at the top of your
   <tt class="FILENAME">.procmailrc</tt>.

<dl><dd><pre>
:0fw
* &lt; 256000
| bmf -p

:0e
{
EXITCODE=$?
}

:0:
* ^X-Spam-Status: Yes
zspam # This is the mailbox where all spam goes.</pre></dd></dl>

<p>Now you have to tell bmf the difference between spam and non-spam messages. 

As an example you can add these shortcuts to your <tt class="FILENAME">.muttrc</tt>

<dl><dd><pre>
macro index &lt;f3&gt; "|bmf -S\n&lt;save-message&gt;=zspam\n" "SPAM"
macro index &lt;f4&gt; "|bmf -N\n&lt;save-message&gt;=Maildir\n" "NO SPAM"
macro pager &lt;f3&gt; "|bmf -S\n&lt;save-message&gt;=zspam\n" "SPAM"
macro pager &lt;f4&gt; "|bmf -N\n&lt;save-message&gt;=Maildir\n" "NO SPAM"
</pre></dd></dl>

<p>Now you can press the F3-button to tell bmf a message in  your  inbox
   is spam ( <tt class="FILENAME">bmf -S</tt>  )  and  move  it  to  you
   spam-folder.
 

<h3>Feeding a spam-archive to bmf:</h3>
<p>To speed up the process of feeding  the  bmf-database  you  can  also
   download a recent
   <a href="http://www.em.ca/~bruceg/spam/">spam archive</a> 
   and run the files in the archive through the following oneliner:

<dl><dd><pre>for i in * ; do bmf -s -i $i; done</pre></dd></dl>

<p>This method is not recommended by the author since the headers  of  a
   message are also taken in account and the  headers  of  the  messages
   from a spam-archive do not match your, but I had  good  results  with
   this method.

<h3>Mixing with spamassassin:</h3>

<p>You can also mix bmf with
   <a  href="http://spamassassin.org">spamassassin</a>.  bmf   is   much
   lighter than spamassassin  but  spamassassin  does  not  have  to  be
   trained. All messages missed by bmf but caught by  spamassassin  will
   be fed to the bmf-database automatically.

  All you have to do is  to  change  the  spamfilter-part  of  your  <tt
  class="FILENAME">.procmailrc</tt> to:

<dl><dd><pre>
:0fw
* &lt; 256000
| bmf -p

:0e
{
EXITCODE=$?
}

:0:
* ^X-Spam-Status: Yes
zspam-bmf


:0fw
* &lt; 256000
| spamc -p 4321 -f

:0e
{
EXITCODE=$?
}

:0:
* ^X-Spam-Status: Yes
{
  :0c
  | bmf -S
  :0
  zspam-sa
}
</pre></dd></dl>

<p>In other words: All mail cought by bmf will be send to the zspam-bmf folder. All spam missed by bmf but cought by spamassassin will be fed to bmf and send to the zspam-sa folder.


<h3>Disclaimer:</h3>

<p>If anything bad happens to your email I am not  responsible.  If  you
   know improvements to this document please send them to the maintainer
   of this port.

</body>
</html>
