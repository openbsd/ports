$OpenBSD: patch-configure,v 1.1 2007/09/05 22:42:52 sthen Exp $
--- configure.orig	Mon Aug  6 15:18:20 2007
+++ configure	Tue Aug  7 23:24:28 2007
@@ -18435,7 +18435,11 @@ echo $ECHO_N "checking for UW IMAP Toolkit c-client li
       imap_ldflags=`cat ${IMAP_TK_DIR}/c-client/LDFLAGS`
    fi
    CPPFLAGS="${CPPFLAGS} -I${IMAP_TK_DIR}/c-client"
-   LIBS="${LIBS} ${IMAP_TK_DIR}/c-client/c-client.a "`echo ${imap_ldflags}`
+   if test -f ${IMAP_TK_DIR}/c-client/c-client.a ; then
+      LIBS="${LIBS} ${IMAP_TK_DIR}/c-client/c-client.a "`echo ${imap_ldflags}`
+   elif test -f ${IMAP_TK_DIR}/../lib/c-client.a ; then
+      LIBS="${LIBS} ${IMAP_TK_DIR}/../lib/c-client.a "`echo ${imap_ldflags}`
+   fi
    cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -22140,13 +22144,13 @@ if test "${USE_UNIXODBC}" != "no"; then
       	 pbxlibdir="-L${UNIXODBC_DIR}"
       fi
    fi
-   { echo "$as_me:$LINENO: checking for SQLConnect in -lodbc" >&5
-echo $ECHO_N "checking for SQLConnect in -lodbc... $ECHO_C" >&6; }
+   { echo "$as_me:$LINENO: checking for SQLConnect in -liodbc" >&5
+echo $ECHO_N "checking for SQLConnect in -liodbc... $ECHO_C" >&6; }
 if test "${ac_cv_lib_odbc_SQLConnect+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lodbc ${pbxlibdir}  $LIBS"
+LIBS="-liodbc -pthread ${pbxlibdir}  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -22209,7 +22213,7 @@ fi
 
 
    if test "${AST_UNIXODBC_FOUND}" = "yes"; then
-      UNIXODBC_LIB="-lodbc "
+      UNIXODBC_LIB="-liodbc "
       UNIXODBC_HEADER_FOUND="1"
       if test "x${UNIXODBC_DIR}" != "x"; then
          UNIXODBC_LIB="${pbxlibdir} ${UNIXODBC_LIB}"
@@ -25640,7 +25644,7 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 		PWLIB_VERSION=`grep "PWLIB_VERSION" ${PWLIB_INCDIR}/ptbuildopts.h | cut -f2 -d ' ' | sed -e 's/"//g'`
 		PWLIB_MAJOR_VERSION=`echo ${PWLIB_VERSION} | cut -f1 -d.`
 		PWLIB_MINOR_VERSION=`echo ${PWLIB_VERSION} | cut -f2 -d.`
-		PWLIB_BUILD_NUMBER=`echo ${PWLIB_VERSION} | cut -f3 -d.`
+		PWLIB_BUILD_NUMBER=$((`echo ${PWLIB_VERSION} | cut -f3 -d.`+0))
 		let PWLIB_VER=${PWLIB_MAJOR_VERSION}*10000+${PWLIB_MINOR_VERSION}*100+${PWLIB_BUILD_NUMBER}
 		let PWLIB_REQ=1*10000+9*100+2
 
@@ -25742,6 +25746,9 @@ esac
 
 PWLIB_PLATFORM="${PWLIB_OSTYPE}_${PWLIB_MACHTYPE}"
 
+if test "${PWLIB_OSTYPE}" == "OpenBSD"; then
+	LIB64=
+fi
 
 
 
@@ -26580,7 +26587,7 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 		OPENH323_VERSION=`grep "OPENH323_VERSION" ${OPENH323_INCDIR}/openh323buildopts.h | cut -f2 -d ' ' | sed -e 's/"//g'`
 		OPENH323_MAJOR_VERSION=`echo ${OPENH323_VERSION} | cut -f1 -d.`
 		OPENH323_MINOR_VERSION=`echo ${OPENH323_VERSION} | cut -f2 -d.`
-		OPENH323_BUILD_NUMBER=`echo ${OPENH323_VERSION} | cut -f3 -d.`
+		OPENH323_BUILD_NUMBER=$((`echo ${OPENH323_VERSION} | cut -f3 -d.`))
 		let OPENH323_VER=${OPENH323_MAJOR_VERSION}*10000+${OPENH323_MINOR_VERSION}*100+${OPENH323_BUILD_NUMBER}
 		let OPENH323_REQ=1*10000+17*100+3
 
@@ -26601,7 +26608,7 @@ echo "${ECHO_T}yes" >&6; }
 		{ echo "$as_me:$LINENO: checking OpenH323 build option" >&5
 echo $ECHO_N "checking OpenH323 build option... $ECHO_C" >&6; }
 		OPENH323_SUFFIX=
-		prefixes="h323_${PWLIB_PLATFORM}_ h323_ openh323"
+		prefixes="h323_${PWLIB_PLATFORM}_ h323 h323_ openh323"
 		for pfx in $prefixes; do
 			files=`ls -l ${OPENH323_LIBDIR}/lib${pfx}*.so* 2>/dev/null`
 			libfile=
@@ -26629,7 +26636,8 @@ echo $ECHO_N "checking OpenH323 build option... $ECHO_
 			d)
 				OPENH323_BUILD="debug";;
 			*)
-				if test "${OPENH323_PREFIX:-undef}" = "openh323"; then
+				if test "${OPENH323_PREFIX:-undef}" = "openh323" \
+				    -o "${OPENH323_PREFIX:-undef}" = "h323"; then
 					notrace=`eval "grep NOTRACE ${OPENH323DIR}/openh323u.mak | grep = | sed -e 's/[A-Z0-9_]*[ 	]*=[ 	]*//'"`
 					if test "x$notrace" = "x"; then
 						notrace="0"
@@ -30668,7 +30676,7 @@ if test "${ac_cv_lib_vorbis_vorbis_info_init+set}" = s
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lvorbis ${pbxlibdir} -lm -lvorbisenc $LIBS"
+LIBS="-lvorbis ${pbxlibdir} -lm -lvorbisenc -logg $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
