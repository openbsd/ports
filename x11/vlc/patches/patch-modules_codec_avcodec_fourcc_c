$OpenBSD: patch-modules_codec_avcodec_fourcc_c,v 1.2 2015/04/30 08:01:58 ajacoutot Exp $

Deal with newer FFmpeg API.

--- modules/codec/avcodec/fourcc.c.orig	Tue Apr 28 19:46:30 2015
+++ modules/codec/avcodec/fourcc.c	Tue Apr 28 20:03:15 2015
@@ -87,9 +87,7 @@ static const struct
     { VLC_CODEC_WMV1, CODEC_ID_WMV1, VIDEO_ES },
     { VLC_CODEC_WMV2, CODEC_ID_WMV2, VIDEO_ES },
     { VLC_CODEC_WMV3, CODEC_ID_WMV3, VIDEO_ES },
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 52, 90, 1 )
     { VLC_CODEC_WMVP, CODEC_ID_WMV3, VIDEO_ES },
-#endif
 
     { VLC_CODEC_VC1,  CODEC_ID_VC1, VIDEO_ES },
     { VLC_CODEC_WMVA, CODEC_ID_VC1, VIDEO_ES },
@@ -186,29 +184,17 @@ static const struct
 
     { VLC_CODEC_DIRAC, CODEC_ID_DIRAC, VIDEO_ES },
 
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 52, 29, 0 )
     { VLC_CODEC_V210, CODEC_ID_V210, VIDEO_ES },
-#endif
 
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 52, 37, 1 )
     { VLC_CODEC_FRWU, CODEC_ID_FRWU, VIDEO_ES },
-#endif
 
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 52, 53, 0 )
     { VLC_CODEC_INDEO5, CODEC_ID_INDEO5, VIDEO_ES },
-#endif
 
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 52, 68, 2 )
     { VLC_CODEC_VP8, CODEC_ID_VP8, VIDEO_ES },
-#endif
 
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 52, 108, 2 )
     { VLC_CODEC_LAGARITH, CODEC_ID_LAGARITH, VIDEO_ES },
-#endif
 
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 52, 117, 0 )
     { VLC_CODEC_MXPEG, CODEC_ID_MXPEG, VIDEO_ES },
-#endif
 
     /* Videogames Codecs */
 
@@ -226,20 +212,13 @@ static const struct
 
     { VLC_CODEC_AMV, CODEC_ID_AMV, VIDEO_ES },
 
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 53, 7, 0 )
     { VLC_CODEC_FLASHSV2, CODEC_ID_FLASHSV2, VIDEO_ES },
-#endif
 
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 53, 9, 0 )
     { VLC_CODEC_WMVP, CODEC_ID_WMV3IMAGE, VIDEO_ES },
     { VLC_CODEC_WMVP2, CODEC_ID_VC1IMAGE, VIDEO_ES },
-#endif
 
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 53, 15, 0 )
     { VLC_CODEC_PRORES, CODEC_ID_PRORES, VIDEO_ES },
-#endif
 
-
 #if 0
 /*    UNTESTED VideoGames*/
     { VLC_FOURCC('W','C','3','V'), CODEC_ID_XAN_WC3,
@@ -288,12 +267,8 @@ static const struct
     /* WMA family */
     { VLC_CODEC_WMA1, CODEC_ID_WMAV1, AUDIO_ES },
     { VLC_CODEC_WMA2, CODEC_ID_WMAV2, AUDIO_ES },
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 52, 35, 0 )
     { VLC_CODEC_WMAP, CODEC_ID_WMAPRO, AUDIO_ES },
-#endif
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 52, 54, 0 )
     { VLC_CODEC_WMAS, CODEC_ID_WMAVOICE, AUDIO_ES },
-#endif
 
     { VLC_CODEC_DVAUDIO, CODEC_ID_DVAUDIO, AUDIO_ES },
 
@@ -315,12 +290,8 @@ static const struct
     { VLC_CODEC_MPGA, CODEC_ID_MP2, AUDIO_ES },
 
     { VLC_CODEC_MP4A, CODEC_ID_AAC, AUDIO_ES },
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 52, 26, 0 )
     { VLC_CODEC_ALS, CODEC_ID_MP4ALS, AUDIO_ES },
-#endif
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 52, 94, 0 )
     { VLC_CODEC_MP4A, CODEC_ID_AAC_LATM, AUDIO_ES },
-#endif
 
     { VLC_CODEC_INTERPLAY_DPCM, CODEC_ID_INTERPLAY_DPCM, AUDIO_ES },
 
@@ -358,10 +329,6 @@ static const struct
 
     { VLC_CODEC_ATRAC3, CODEC_ID_ATRAC3, AUDIO_ES },
 
-#if LIBAVCODEC_VERSION_MAJOR < 54
-    { VLC_CODEC_SONIC, CODEC_ID_SONIC, AUDIO_ES },
-#endif
-
     { VLC_CODEC_IMC, CODEC_ID_IMC, AUDIO_ES },
 
     { VLC_CODEC_TRUESPEECH, CODEC_ID_TRUESPEECH, AUDIO_ES },
@@ -372,18 +339,10 @@ static const struct
 
     { VLC_CODEC_QCELP, CODEC_ID_QCELP, AUDIO_ES },
     { VLC_CODEC_SPEEX, CODEC_ID_SPEEX, AUDIO_ES },
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 52, 34, 0 )
     { VLC_CODEC_TWINVQ, CODEC_ID_TWINVQ, AUDIO_ES },
-#endif
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 52, 36, 0 )
     { VLC_CODEC_ATRAC1, CODEC_ID_ATRAC1, AUDIO_ES },
-#endif
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 52, 47, 0 )
     { VLC_CODEC_SIPR, CODEC_ID_SIPR, AUDIO_ES },
-#endif
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 52, 91, 0 )
     { VLC_CODEC_ADPCM_G722, CODEC_ID_ADPCM_G722, AUDIO_ES },
-#endif
 
     /* Lossless */
     { VLC_CODEC_FLAC, CODEC_ID_FLAC, AUDIO_ES },
@@ -397,11 +356,8 @@ static const struct
     { VLC_CODEC_TRUEHD, CODEC_ID_TRUEHD, AUDIO_ES },
     { VLC_CODEC_MLP, CODEC_ID_MLP, AUDIO_ES },
 
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 54, 5, 0 )
     { VLC_CODEC_WMAL, CODEC_ID_WMALOSSLESS, AUDIO_ES },
-#endif
 
-
     /* PCM */
     { VLC_CODEC_S8, CODEC_ID_PCM_S8, AUDIO_ES },
     { VLC_CODEC_U8, CODEC_ID_PCM_U8, AUDIO_ES },
@@ -429,17 +385,13 @@ static const struct
 #endif
 
     /* Subtitle streams */
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 52, 33, 0 )
     { VLC_CODEC_BD_PG, CODEC_ID_HDMV_PGS_SUBTITLE, SPU_ES },
-#endif
     { VLC_CODEC_SPU, CODEC_ID_DVD_SUBTITLE, SPU_ES },
     { VLC_CODEC_DVBS, CODEC_ID_DVB_SUBTITLE, SPU_ES },
     { VLC_CODEC_SUBT, CODEC_ID_TEXT, SPU_ES },
     { VLC_CODEC_XSUB, CODEC_ID_XSUB, SPU_ES },
     { VLC_CODEC_SSA, CODEC_ID_SSA, SPU_ES },
-#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT( 52, 38, 0 )
     { VLC_CODEC_TELETEXT, CODEC_ID_DVB_TELETEXT, SPU_ES },
-#endif
 
     { 0, 0, UNKNOWN_ES }
 };
