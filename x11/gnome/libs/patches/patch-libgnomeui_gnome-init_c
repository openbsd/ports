$OpenBSD: patch-libgnomeui_gnome-init_c,v 1.8 2007/06/01 16:44:42 jasper Exp $
--- libgnomeui/gnome-init.c.orig	Sat Aug  3 15:23:52 2002
+++ libgnomeui/gnome-init.c	Fri Jun  1 18:38:20 2007
@@ -205,32 +205,12 @@ gnome_init_cb(poptContext ctx, enum poptCallbackReason
 	switch(reason) {
 	case POPT_CALLBACK_REASON_PRE:
                 {
-                        char *ctype, *old_ctype = NULL;
-                        gboolean ctype_set;
+			char old_ctype = NULL;
 
                         gnome_segv_setup (FALSE);
-                        ctype = setlocale (LC_CTYPE, NULL);
-
-                        if (ctype && !strcmp(ctype, "C")) {
-                                old_ctype = g_strdup (getenv ("LC_CTYPE"));
-                                putenv ("LC_CTYPE=en_US");
-                                ctype_set = TRUE;
-                        } else
-                                ctype_set = FALSE;
-
+                        
                         gtk_set_locale ();
 
-                        if (ctype_set) {
-                                char *setme;
-
-                                if (old_ctype) {
-                                        setme = g_strconcat ("LC_CTYPE=", old_ctype, NULL);
-                                        g_free(old_ctype);
-                                } else
-                                        setme = "LC_CTYPE=";
-
-                                putenv (setme);
-                        }
                         client = gnome_master_client();
                 }
 		break;
@@ -673,9 +653,9 @@ static void gnome_segv_handle(int signum)
 
 		/* Child process */
 		execl(GNOMEBINDIR "/gnome_segv", GNOMEBINDIR "/gnome_segv",
-		      program_invocation_name, buf, gnome_app_version, NULL);
+		      program_invocation_name, buf, gnome_app_version, (void *)NULL);
 
-                execlp("gnome_segv", "gnome_segv", program_invocation_name, buf, gnome_app_version, NULL);
+                execlp("gnome_segv", "gnome_segv", program_invocation_name, buf, gnome_app_version, (void *)NULL);
 
                 _exit(99);
 	}
