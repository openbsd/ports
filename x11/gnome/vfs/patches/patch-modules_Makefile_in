$OpenBSD: patch-modules_Makefile_in,v 1.2 2002/02/15 19:11:16 nino Exp $
--- modules/Makefile.in.orig	Sun Jan 20 15:32:18 2002
+++ modules/Makefile.in	Mon Feb  4 14:53:11 2002
@@ -197,7 +197,7 @@ EXTRA_DIST =  	default-modules.conf				c
 @HAVE_CDDA_TRUE@CDDA_LTLIBS = libcdda.la
 @HAVE_CDDA_FALSE@CDDA_LTLIBS = 
 
-module_flags = -export_dynamic -avoid-version
+module_flags = -module -export_dynamic -avoid-version
 modulesdir = $(libdir)/vfs/modules
 
 modules_LTLIBRARIES =  	$(CDDA_LTLIBS)					libextfs.la					libfile.la					libvfs-test.la					$(HTTP_LTLIBS)					libbzip2.la					libgzip.la					libftp.la					libnntp.la					libvfs-pipe.la					libvfs-translate.la				libdesktop.la					$(NULL)
@@ -248,6 +248,7 @@ libssh_la_SRCLIST =  	ssh-method.c 					
 
 libvfs_test_la_SOURCES =  	test-method.c				
 
+libvfs_test_la_LDFLAGS = $(module_flags)
 libvfs_test_la_LIBADD = $(XML_LIBS)
 
 ### `gzip' method
@@ -266,10 +267,12 @@ libbzip2_la_LIBADD = -lbz2
 
 libftp_la_SOURCES =  	ftp-method.c					ftp-method.h
 
+libftp_la_LDFLAGS = $(module_flags)
 
 ### `nntp' method
 
 libnntp_la_SOURCES =  	nntp-method.c 					nntp-method.h
+libnntp_la_LDFLAGS = $(module_flags)
 
 
 ### `nfs' method
@@ -311,7 +314,6 @@ libextfs_la_LIBADD = 
 libextfs_la_OBJECTS =  extfs-method.lo
 libfile_la_LIBADD = 
 libfile_la_OBJECTS =  file-method.lo
-libvfs_test_la_LDFLAGS = 
 libvfs_test_la_DEPENDENCIES = 
 libvfs_test_la_OBJECTS =  test-method.lo
 libhttp_la_DEPENDENCIES = 
@@ -320,10 +322,8 @@ libbzip2_la_DEPENDENCIES = 
 libbzip2_la_OBJECTS =  bzip2-method.lo
 libgzip_la_DEPENDENCIES = 
 libgzip_la_OBJECTS =  gzip-method.lo
-libftp_la_LDFLAGS = 
 libftp_la_LIBADD = 
 libftp_la_OBJECTS =  ftp-method.lo
-libnntp_la_LDFLAGS = 
 libnntp_la_LIBADD = 
 libnntp_la_OBJECTS =  nntp-method.lo
 libvfs_pipe_la_DEPENDENCIES = 
