$OpenBSD: patch-panels_user-accounts_um-realm-manager_c,v 1.2 2014/03/27 12:41:07 ajacoutot Exp $

XXX push upsteam: fix build with Heimdal.

--- panels/user-accounts/um-realm-manager.c.orig	Mon Mar  3 12:55:25 2014
+++ panels/user-accounts/um-realm-manager.c	Thu Mar 27 13:00:03 2014
@@ -22,7 +22,7 @@
 
 #include "um-realm-manager.h"
 
-#include <krb5/krb5.h>
+#include <krb5.h>
 
 #include <glib.h>
 #include <glib/gi18n.h>
@@ -739,8 +739,10 @@ login_perform_kinit (krb5_context k5,
         code = krb5_get_init_creds_opt_alloc (k5, &opts);
         g_return_val_if_fail (code == 0, code);
 
+#ifdef HAVE_KRB5_GET_INIT_CREDS_OPT_SET_OUT_CCACHE
         code = krb5_get_init_creds_opt_set_out_ccache (k5, opts, ccache);
         g_return_val_if_fail (code == 0, code);
+#endif
 
         code = krb5_get_init_creds_password (k5, &creds, principal,
                                              (char *)password,
