$OpenBSD: patch-configure,v 1.1.1.1 2010/07/09 16:43:11 sebastia Exp $
--- configure.orig	Sun May 17 21:21:59 2009
+++ configure	Tue Dec  8 09:06:27 2009
@@ -10182,13 +10182,7 @@ $as_echo "$tcl_cv_ld_elf" >&6; }
 	    TCL_LIB_VERSIONS_OK=nodots
 	    ;;
 	OpenBSD-*)
-	    # OpenBSD/SPARC[64] needs -fPIC, -fpic will not do.
-	    case `machine` in
-	    sparc|sparc64)
-		SHLIB_CFLAGS="-fPIC";;
-	    *)
-		SHLIB_CFLAGS="-fpic";;
-	    esac
+	    SHLIB_CFLAGS="-fPIC"
 	    SHLIB_LD="${CC} -shared ${SHLIB_CFLAGS}"
 	    SHLIB_LD_LIBS='${LIBS}'
 	    SHLIB_SUFFIX=".so"
@@ -10196,7 +10190,7 @@ $as_echo "$tcl_cv_ld_elf" >&6; }
 	    DL_LIBS=""
 	    CC_SEARCH_FLAGS='-Wl,-rpath,${LIB_RUNTIME_DIR}'
 	    LD_SEARCH_FLAGS=${CC_SEARCH_FLAGS}
-	    SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}.so.1.0'
+	    SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}.so.${SHLIB_VERSION}'
 	    { $as_echo "$as_me:$LINENO: checking for ELF" >&5
 $as_echo_n "checking for ELF... " >&6; }
 if test "${tcl_cv_ld_elf+set}" = set; then
