# $OpenBSD: swedish-Makefile,v 1.2 2001/05/27 21:46:07 lebel Exp $

PHONET=swedish_phonet.dat
CONFIG=swedish.dat

INSTALL_DATA = ${INSTALL} -m 644

pkgdatadir = `$(WRKSRC)/src/aspell dump config | grep "data-dir current" | grep -v "local-data-dir current" | sed 's/^.*: \(.*\)$$/\1/'`
pkglibdir  = `$(WRKSRC)/src/aspell dump config | grep "dict-dir current" | grep -v "local-data-dir current" | sed 's/^.*: \(.*\)$$/\1/'`
pspell_pkgdatadir=`pspell-config pkgdatadir`

all:	build sv-aspell.pwli

build: 
	@(for i in $(WRKSRC)/data/*.dat; do ln -sf $$i; done)
	$(WRKSRC)/src/aspell --data-dir=. --lang=swedish \
	   create master ./swedish < svenska.ordlista

sv-aspell.pwli:
	@echo $(pkglibdir)/svenska > sv-aspell.pwli

install: swedish
	${INSTALL} -d $(DESTDIR)$(pkgdatadir) $(DESTDIR)$(pkglibdir) $(DESTDIR)$(pspell_pkgdatadir)
	${INSTALL_DATA} $(PHONET) $(DESTDIR)$(pkgdatadir)
	${INSTALL_DATA} $(CONFIG) $(DESTDIR)$(pkgdatadir)
	${INSTALL_DATA} ./swedish  $(DESTDIR)$(pkglibdir)
	ln -fs swedish  $(DESTDIR)$(pkglibdir)/svenska
	${INSTALL_DATA} sv-aspell.pwli $(DESTDIR)$(pspell_pkgdatadir)

# vim:sw=8:tw=72:ts=8:ft=make
