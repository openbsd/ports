#!/bin/sh
#
# $OpenBSD: puppetd.rc,v 1.1 2013/03/08 16:12:48 ajacoutot Exp $

daemon="/usr/local/bin/puppet agent"

. /etc/rc.d/rc.subr

pexp=".*ruby.* ${daemon}${daemon_flags:+ ${daemon_flags}}"
rc_reload=NO

# XXX can't stop within a fair amount of time when puppetmasterd is unreachable;
# related to: http://projects.puppetlabs.com/issues/11360 ?
rc_stop() {
	pkill -9 -f "^${pexp}"
}

rc_cmd $1
