COMMENT=		GCP Cloud SQL Auth proxy

VERSION=		2.11.4
PKGNAME=		cloud-sql-proxy-${VERSION}

# cloud-sql-proxy-vendored distfile generated by fetching archive from
# https://github.com/GoogleCloudPlatform/cloud-sql-proxy/archive/v$VERSION/cloud-sql-proxy-$VERSION.tar.gz
# and running "go mod tidy" + "go mod vendor"
DISTNAME=		cloud-sql-proxy-vendored-${VERSION}
SITES=			https://distfiles.bsdfrog.org/
ALL_TARGET=		github.com/GoogleCloudPlatform/cloud-sql-proxy

CATEGORIES=		sysutils databases net

MAINTAINER=		Antoine Jacoutot <ajacoutot@openbsd.org>

# Apache-2.0
PERMIT_PACKAGE=		Yes

WANTLIB += c pthread

MODULES=		lang/go

# .build/gcs_upload.yaml
MODGO_LDFLAGS +=	-X main.metadataString=openbsd.${_GOARCH}

.include <bsd.port.mk>
