$OpenBSD: patch-server_Makefile,v 1.1.1.1 2003/11/03 20:34:16 sturm Exp $
--- server/Makefile.orig	2003-10-11 15:19:55.000000000 -0700
+++ server/Makefile	2003-10-28 11:01:05.000000000 -0800
@@ -2,18 +2,14 @@ PACKAGE_D ?= gkrellmd
 PKG_CONFIG ?= pkg-config
 BINMODE ?= 755
 
-INSTALLROOT ?= $(DESTDIR)$(PREFIX)
-ifeq ($(INSTALLROOT),)
-	INSTALLROOT = /usr/local
-endif
-
+INSTALLROOT ?= ${PREFIX}
 SINSTALLDIR ?= $(INSTALLROOT)/bin
 INSTALLDIRMODE ?= 755
-SMANDIR ?= $(INSTALLROOT)/share/man/man1
+SMANDIR ?= $(INSTALLROOT)/man/man1
 MANMODE ?= 644
 MANDIRMODE ?= 755
 INSTALL ?= install
-LINK_FLAGS ?= -Wl,-E
+LINK_FLAGS ?= -Wl
 CC ?= gcc
 STRIP ?= -s
 
@@ -23,9 +19,9 @@ PKG_LIB = `$(PKG_CONFIG) --libs glib-2.0
 GLIB12_INCLUDE = `glib-config --cflags gthread`
 GLIB12_LIB = `glib-config --libs gthread`
 
-FLAGS = -O2 -I.. $(PKG_INCLUDE) $(GTOP_INCLUDE)
+FLAGS+= -I.. $(PKG_INCLUDE) $(GTOP_INCLUDE)
 ifeq ($(glib12),1)
-FLAGS = -O2 -I.. $(GLIB12_INCLUDE) $(GTOP_INCLUDE)
+FLAGS += -I.. $(GLIB12_INCLUDE) $(GTOP_INCLUDE)
 endif
 
 FLAGS+= $(PTHREAD_INC)
@@ -54,9 +50,7 @@ ifeq ($(HAVE_GETADDRINFO),1)
     FLAGS += -DHAVE_GETADDRINFO
 endif
 
-
-override CC += -Wall $(FLAGS)
-
+CFLAGS += $(FLAGS)
 OS_NAME=$(shell uname -s)
 OS_RELEASE=$(shell uname -r)
 
