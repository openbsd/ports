$OpenBSD: patch-salt_modules_mount_py,v 1.8 2016/06/16 08:53:47 ajacoutot Exp $

https://github.com/saltstack/salt/pull/34057

--- salt/modules/mount.py.orig	Tue Jun 14 00:17:49 2016
+++ salt/modules/mount.py	Thu Jun 16 10:39:32 2016
@@ -140,10 +140,10 @@ def _active_mounts_openbsd(ret):
     '''
     for line in __salt__['cmd.run_stdout']('mount -v').split('\n'):
         comps = re.sub(r"\s+", " ", line).split()
-        nod = __salt__['cmd.run_stdout']('ls -l {0}'.format(comps[0]))
-        nod = ' '.join(nod.split()).split(" ")
         parens = re.findall(r'\((.*?)\)', line, re.DOTALL)
         if len(parens) > 1:
+            nod = __salt__['cmd.run_stdout']('ls -l {0}'.format(comps[0]))
+            nod = ' '.join(nod.split()).split(" ")
             ret[comps[3]] = {'device': comps[0],
                          'fstype': comps[5],
                          'opts': _resolve_user_group_names(parens[1].split(", ")),
@@ -153,7 +153,7 @@ def _active_mounts_openbsd(ret):
         else:
             ret[comps[2]] = {'device': comps[0],
                             'fstype': comps[4],
-                            'opts': _resolve_user_group_names(parens[1].split(", "))}
+                            'opts': _resolve_user_group_names(parens[0].split(", "))}
     return ret
 
 
