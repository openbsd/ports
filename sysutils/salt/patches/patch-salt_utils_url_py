https://github.com/saltstack/salt/issues/66898

Index: salt/utils/url.py
--- salt/utils/url.py.orig
+++ salt/utils/url.py
@@ -4,8 +4,9 @@ URL utils
 
 import re
 import sys
-from urllib.parse import urlparse, urlunparse
+from urllib.parse import urlparse, urlunparse, urlunsplit
 
+# Import salt libs
 import salt.utils.data
 import salt.utils.path
 import salt.utils.platform
@@ -46,8 +47,7 @@ def create(path, saltenv=None):
     path = salt.utils.data.decode(path)
 
     query = f"saltenv={saltenv}" if saltenv else ""
-    url = salt.utils.data.decode(urlunparse(("file", "", path, "", query, "")))
-    return "salt://{}".format(url[len("file:///") :])
+    return f"salt://{salt.utils.data.decode(urlunsplit(("", "", path, query, "")))}"
 
 
 def is_escaped(url):
