$OpenBSD: patch-deps_npm_node_modules_node-gyp_lib_build_js,v 1.2 2012/05/09 15:32:25 sthen Exp $
--- deps/npm/node_modules/node-gyp/lib/build.js.orig	Fri May  4 21:12:52 2012
+++ deps/npm/node_modules/node-gyp/lib/build.js	Wed May  9 09:26:31 2012
@@ -11,13 +11,15 @@ var fs = require('graceful-fs')
   , which = require('which')
   , mkdirp = require('./util/mkdirp')
   , win = process.platform == 'win32'
+  , openbsd = process.platform == 'openbsd'
 
 exports.usage = 'Invokes `' + (win ? 'msbuild' : 'make') + '` and builds the module'
 
 function build (gyp, argv, callback) {
 
   gyp.verbose('build args', argv)
-  var command = win ? 'msbuild' : 'make'
+  var builder = openbsd ? 'gmake' : 'make' 
+  var command = win ? 'msbuild' : builder
     , buildDir = path.resolve('build')
     , configPath = path.resolve(buildDir, 'config.gypi')
     , buildType
@@ -181,6 +183,8 @@ function build (gyp, argv, callback) {
       argv.push('/p:Configuration=' + buildType + ';Platform=' + p)
     } else {
       argv.push('BUILDTYPE=' + buildType)
+      // Don't hide compiler commands
+      argv.push('V=1')
       // Invoke the Makefile in the 'build' dir.
       argv.push('-C')
       argv.push('build')
