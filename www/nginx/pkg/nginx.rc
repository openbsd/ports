#!/bin/ksh
#
# $OpenBSD: nginx.rc,v 1.15 2021/08/28 08:56:12 ajacoutot Exp $

daemon="${TRUEPREFIX}/sbin/nginx"

. /etc/rc.d/rc.subr

pexp="nginx: master process ${daemon}${daemon_flags:+ ${daemon_flags}}"

rc_reload() {
	${daemon} ${daemon_flags} -t &&
		pkill -HUP -T "${daemon_rtable}" -xf "${pexp}"
}

rc_stop() {
	pkill -QUIT -T "${daemon_rtable}" -xf "${pexp}"
}

rc_cmd $1
