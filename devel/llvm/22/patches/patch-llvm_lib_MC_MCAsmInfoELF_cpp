Index: llvm/lib/MC/MCAsmInfoELF.cpp
--- llvm/lib/MC/MCAsmInfoELF.cpp.orig
+++ llvm/lib/MC/MCAsmInfoELF.cpp
@@ -41,7 +41,7 @@ bool MCAsmInfoELF::useCodeAlign(const MCSection &Sec) 
 }
 
 MCAsmInfoELF::MCAsmInfoELF() {
-  HasIdentDirective = true;
+  HasIdentDirective = false;
   WeakRefDirective = "\t.weak\t";
   PrivateGlobalPrefix = ".L";
   PrivateLabelPrefix = ".L";
