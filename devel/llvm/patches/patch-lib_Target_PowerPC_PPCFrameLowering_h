$OpenBSD: patch-lib_Target_PowerPC_PPCFrameLowering_h,v 1.5 2022/01/03 21:33:51 jca Exp $

Add RETGUARD implementation for powerpc and powerpc64.

Index: lib/Target/PowerPC/PPCFrameLowering.h
--- lib/Target/PowerPC/PPCFrameLowering.h.orig
+++ lib/Target/PowerPC/PPCFrameLowering.h
@@ -12,6 +12,7 @@
 #ifndef LLVM_LIB_TARGET_POWERPC_PPCFRAMELOWERING_H
 #define LLVM_LIB_TARGET_POWERPC_PPCFRAMELOWERING_H
 
+#include "PPCReturnProtectorLowering.h"
 #include "llvm/ADT/STLExtras.h"
 #include "llvm/CodeGen/TargetFrameLowering.h"
 #include "llvm/Target/TargetMachine.h"
@@ -173,6 +174,9 @@ class PPCFrameLowering: public TargetFrameLowering { (
   /// function prologue/epilogue.
   bool canUseAsPrologue(const MachineBasicBlock &MBB) const override;
   bool canUseAsEpilogue(const MachineBasicBlock &MBB) const override;
+
+  const PPCReturnProtectorLowering RPL;
+  const ReturnProtectorLowering *getReturnProtector() const override;
 };
 } // End llvm namespace
 
