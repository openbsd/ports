$OpenBSD: patch-jdk_src_share_classes_sun_net_spi_DefaultProxySelector_java,v 1.2 2013/01/14 20:16:56 kurt Exp $

Crash due to missing synchronization on gconf_client.
Upstream CR 7188755.

--- jdk/src/share/classes/sun/net/spi/DefaultProxySelector.java.orig	Tue Aug 28 19:14:39 2012
+++ jdk/src/share/classes/sun/net/spi/DefaultProxySelector.java	Wed Jan  9 18:59:05 2013
@@ -345,6 +345,6 @@ public class DefaultProxySelector extends ProxySelecto
         }
     }
 
-    private native static boolean init();
-    private native Proxy getSystemProxy(String protocol, String host);
+    private synchronized native static boolean init();
+    private synchronized native Proxy getSystemProxy(String protocol, String host);
 }
