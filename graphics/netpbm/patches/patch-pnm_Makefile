--- pnm/Makefile.orig	Mon Jan 21 00:17:29 2002
+++ pnm/Makefile	Thu Dec 29 15:49:33 2005
@@ -2,6 +2,8 @@ SRCDIR = ..
 BUILDDIR = ..
 include $(BUILDDIR)/Makefile.config
 
+SOVER=$(LIBpnm_VERSION)
+
 LIBROOT = pnm
 LIBPNM = $(NETPBMSHLIBPREFIX)$(LIBROOT).$(NETPBMLIBSUFFIX)
 MAJ = 9
@@ -146,13 +148,14 @@ SCRIPTS = anytopnm pamstretch-gen pnmind
 # MERGE_ALIASES is additional names to be linked to the merge binary which are
 # alternate names for a program whose source is called something else.
 # Every name here must be referenced in pnmmerge.c.
-MERGE_ALIASES = pnmnoraw gemtopbm
+MERGE_ALIASES =
 
 OBJECTS = $(patsubst %, %.o, $(BINARIES)) exif.o
 
 MERGE_OBJECTS = $(patsubst %,%.o2, $(MERGEBINARIES))
 
 LIBOBJECTS = libpnm1.o libpnm2.o libpnm3.o libpnm4.o libpam.o libpammap.o
+SHLIBOBJECTS = $(patsubst %.o, %.lo, $(LIBOBJECTS))
 
 MANUALS1 = $(BINARIES) $(SCRIPTS)
 MANUALS3 = libpnm
@@ -170,7 +173,7 @@ endif
 	$(MAKE) -C jbig all
 	$(MAKE) -C pnmtopalm all
 PHONY: merge
-merge:    $(MERGENAME) $(NOMERGEBINARIES)
+merge:    $(MERGENAME) $(NOMERGEBINARIES) $(EXTRA_STATICLIB)
 ifneq ($(BUILD_FIASCO), N) 
 	$(MAKE) -C fiasco all
 endif
