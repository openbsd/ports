# $OpenBSD: Makefile,v 1.19 2020/03/22 16:01:43 kn Exp $

COMMENT =	Z3 theorem prover

VERSION =	4.8.6

GH_ACCOUNT =	Z3Prover
GH_PROJECT =	z3
GH_TAGNAME =	${GH_PROJECT}-${VERSION}

DISTNAME =	${GH_TAGNAME}
PKGNAME =	${DISTNAME:L}
REVISION =	0

SHARED_LIBS =	z3			2.0 # 4.8

CATEGORIES =	math

WANTLIB +=	c m pthread ${COMPILER_LIBCXX}

# MIT
PERMIT_PACKAGE =	Yes

# c++11
COMPILER =	base-clang ports-gcc

MODULES =	devel/cmake \
		lang/python

MODPY_VERSION =	${MODPY_DEFAULT_VERSION_3}

CONFIGURE_ARGS +=	-DENABLE_EXAMPLE_TARGETS=ON \
			-DINCLUDE_GIT_HASH=OFF \
			-DINCLUDE_GIT_DESCRIBE=OFF \
			-DBUILD_PYTHON_BINDINGS=ON \
			-DUSE_OPENMP=OFF \
			-DUSE_LIB_GMP=OFF

WRKDIST =	${WRKDIR}/z3-${DISTNAME}

NO_TEST =	Yes

pre-configure:
	${SUBST_CMD} ${WRKSRC}/scripts/mk_util.py

.include <bsd.port.mk>
